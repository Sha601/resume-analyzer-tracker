{% extends "base.html" %}

{% block content %}

<div class="max-w-2xl mx-auto bg-gradient-to-b from-blue-950 to-blue-900 p-6 rounded-2xl shadow-2xl">
    <h3 class="text-3xl font-bold mb-6 text-white text-center">Upload Your Resume</h3>

    <form method="POST" action="{{url_for('routes.analyze')}}" enctype="multipart/form-data">
        <label for="resume" class="block text-blue-300 mb-2 font-medium">Resume file (PDF)</label>
        <input type="file" id="resume" name="resume" accept=".pdf"
            class="w-full p-3 border border-blue-800 rounded-lg mb-4 bg-blue-950 text-white hover:border-blue-500 focus:ring-2 focus:ring-blue-500 transition-all duration-300" required>

        <label for="job_description" class="block text-blue-300 mb-2 font-medium">Enter Job Description</label>
        <textarea id="job_description" name="job_description" rows="6"
            class="w-full p-3 border border-blue-800 rounded-lg mb-4 bg-blue-950 text-white hover:border-blue-500 focus:ring-2 focus:ring-blue-500 transition-all duration-300" required>{{ request.form.job_description or '' }}</textarea>

        <button type="submit" 
            class="w-full bg-gradient-to-r from-blue-700 to-blue-500 text-white px-4 py-3 rounded-xl shadow-lg hover:from-blue-600 hover:to-blue-400 transition-all duration-300 font-semibold">
            Analyze
        </button>
    </form>

    {% if resume_skills and jd_skills %}
    <hr class="my-6 border-blue-800" />
    <h4 class="text-2xl font-semibold mb-4 text-white text-center">Extracted Skills</h4>

    <div class="space-y-4">
        <div class="p-4 bg-blue-950 rounded-xl shadow-inner text-blue-200">
            <h5 class="font-semibold mb-2 text-white">Resume Skills:</h5>
            <ul class="list-disc list-inside space-y-1">
                {% for skill in resume_skills %}
                <li>✔ {{ skill }}</li>
                {% endfor %}
            </ul>
        </div>

        <div class="p-4 bg-blue-950 rounded-xl shadow-inner text-blue-200">
            <h5 class="font-semibold mb-2 text-white">Job Description Skills:</h5>
            <ul class="list-disc list-inside space-y-1">
                {% for skill in jd_skills %}
                <li>✔ {{ skill }}</li>
                {% endfor %}
            </ul>
        </div>

        <div class="p-4 bg-blue-950 rounded-xl shadow-inner text-blue-200">
            <h5 class="font-semibold mb-2 text-white">Common Skills:</h5>
            <ul class="list-disc list-inside space-y-1">
                {% for skill in common_skills %}
                <li>✔ {{ skill }}</li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <div class="mt-4 text-center text-blue-300 space-y-1">
        <p><strong>Skill Match Percentage:</strong> {{ skill_match_percentage }}%</p>
        <p><strong>Overall Match Score:</strong> {{ match_percentage }}%</p>
    </div>
    {% endif %}
</div>

{% endblock %}